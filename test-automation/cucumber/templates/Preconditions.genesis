package templates
template {
    name("Preconditions")
    version("0.1")

    createWorkflow("create")
    destroyWorkflow("destroy")

    dataSources {
        nexus("jboss") {
          query = "https://repository.jboss.org/nexus/content/groups/public-jboss/org/jboss/jbossas/jboss-as-distribution/"
          filter = "*.zip"
        }
    }

    workflow("create") {
        steps {
        }
    }

    workflow("wont_run") {
        require {
            "One must be less than zero" { 1 < 0 }
        }

        steps {}
    }

    workflow("should_run") {
        require {
            "One must be equal to one" { 1 == 1 }
        }
        variables {
            variable("a").description("Test variable").optional(defaultValue = "foo")
            variable("b").description("JBoss artifact").dataSource("jboss")
        }

        steps {
            execLocal {
                phase = "init"
                shell = "sh"
                commands = ['echo "Creation of new environment..."']
            }
        }
    }

    workflow("destroy") {
        steps {
        }
    }
}
